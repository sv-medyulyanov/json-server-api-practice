# Тест-кейсы: Интеграционное тестирование (API + JSON-база)

## Объект: Локальный REST API на json-server
**Базовый URL:** `http://localhost:3000`

### Кейс 1: Запуск сервера и проверка доступности
- **Предусловие:** Установлен Node.js и json-server.
- **Шаги:**
    1. В терминале выполнить: `json-server --watch db.json --port 3000`.
    2. В браузере открыть `http://localhost:3000`.
- **Ожидаемый результат:** Отображается страница с документацией API (Resources: /posts, /comments).
- **Фактический результат:** Сервер запустился, документация доступна.
- **Статус:** Pass ✅

### Кейс 2: Создание записи (POST) и проверка сохранения в "БД"
- **Предусловие:** Сервер запущен.
- **Шаги:**
    1. Отправить POST `/posts` с телом `{"title": "Test", "author": "QA"}`.
    2. Немедленно открыть файл `db.json` в текстовом редакторе.
- **Ожидаемый результат:**
    - API: статус `201 Created`, в ответе новый объект с `id`.
    - БД: В массиве `posts` появилась новая запись с соответствующими данными.
- **Фактический результат:** Статус 201 получен. Файл `db.json` автоматически обновился, добавив новую запись. *Примечание: json-server v1+ генерирует строковые ID (например, `"82b2"`).
- **Статус:** Pass ✅

### Кейс 3: Удаление записи (DELETE) через path и query (сравнение)
- **Предусловие:** Существует пост с ID=2 (числовой) и пост с ID="82b2" (строковый).
- **Шаги:**
    1. Удалить числовой ID через query: `DELETE /posts?id=2`.
    2. Удалить строковый ID через path: `DELETE /posts/82b2`.
    3. Попробовать удалить строковый ID через query: `DELETE /posts?id=82b2`.
- **Ожидаемый результат:** Записи удаляются, статус `200 OK`.
- **Фактический результат:**
    - `DELETE /posts?id=2` → `200 OK` (успех).
    - `DELETE /posts/82b2` → `200 OK` (успех).
    - `DELETE /posts?id=82b2` → `404 Not Found` (неудача).
- **Статус:** Pass (для работающих форматов) / Обнаружена **неконсистентность API**.
- **Ключевая находка:** Обнаружена **несогласованность в обработке строковых ID**. Метод DELETE через query-параметр (`?id=`) не работает со строковыми идентификаторами, в то время как GET и DELETE через path (`/{id}`) — работают. Это важно для тестирования реальных API: необходимо проверять все заявленные форматы запросов.
